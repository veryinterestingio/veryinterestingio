<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="stylesheet" type="text/less" href="/css/post.less">
	
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" type="image/png" href="/img/cat.jpg"/>
	<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/less.js/2.5.3/less.min.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-58440568-4', 'auto');
		ga('send', 'pageview');
	</script>

	<!-- Cookie Consent plugin by Silktide - http://silktide.com/cookieconsent -->
	<script type="text/javascript">
    window.cookieconsent_options = {"message":"This website uses cookies to ensure you get the best experience on our website","dismiss":"Got it!","learnMore":"More info","link":null,"theme":"dark-bottom"};
	</script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.10/cookieconsent.min.js"></script>
	<title>How does Google search through its entire database in a fraction of a second when you search for something?</title>
</head>
<body>
	<div id="header">
	<a href="/about" title="About">About</a>
</div>
	<div id="content">
		<div class="home">
			<a href="/">Back to Home</a>
		</div>

		<ul class="posts">
<li class="post" data-handle="ko97vd">
	<div class="overview">
		<a class="source" href="https://www.reddit.com/r/askscience/comments/ko97vd/how_does_google_search_through_its_entire/" target="_blank" title="Reddit thread where this comes from"><i class="fa fa-external-link" aria-hidden="true"></i></a>
		<h2>
			<span class="tags tag-Computing">Computing</span>
			<a href="/posts/ko97vd" onclick="return false">How does Google search through its entire database in a fraction of a second when you search for something?</a>
		</h2>
		<!--<span class="date">2021-01-04</span>-->
		<span class="is-new">NEW</span>
	</div>

		<div class="question"><span class="qa" title="Question">Q:</span><div class="markdown"><p>Shouldn't it take much longer to search for keywords in 2 billion websites?</p></div></div>

	<div class="comment-section">
		<div class="answers-placeholder">
			<div class="answers">
	<div class="answer" data-handle="ghpxjif">
		<a class="author" href="https://www.reddit.com/user/Excedrinpm" target="_blank">Excedrinpm</a>
		<span class="qa" title="Answer">A:</span><div class="markdown"><p>Google has a page somewhat answering this question <a href="https://www.google.com/search/howsearchworks/crawling-indexing/" target="_blank">here</a>. A super simplified summary of it all is that google doesn't have to search through 2 billion websites (they actually say they've crawled through hundreds of billions of pages) for each search. They've already indexed each website with useful tags so they can quickly jump to a subset of websites to provide you. </p>
<p>After they have that subset of pages they use several algorithms that pick out the meaning, relevance, quality, usability, and context of your search and the pages themselves. </p>
<p>So for a direct answer to your question: You're right in thinking it would take quite long to search through their entire database each time, but they were clever enough so they don't have to.</p></div>		<div class="replies-controls">
			<a class="show-replies" href="javascript:void(0)">show replies...</a>
			<a class="hide-replies" href="javascript:void(0)">hide replies...</a>
		</div>
		<div class="replies-placeholder"></div>
	</div>
	<a class="less-answers upper" href="javascript:void(0)">less answers...</a>
	<div class="answer" data-handle="ghpzn8m">
		<a class="author" href="https://www.reddit.com/user/Aggravating-Forever2" target="_blank">Aggravating-Forever2</a>
		<span class="qa" title="Answer">A:</span><div class="markdown"><p>Because it fundamentally doesn't work the way that it sounds like you're thinking, from the way you phrase that.</p>
<p>Google actually has a fair bit of information on the overall process available here: <a href="https://www.google.com/search/howsearchworks/" target="_blank"><a href="https://www.google.com/search/howsearchworks/" target="_blank">https://www.google.com/search/howsearchworks/</a></a></p>
<p>But the simple version is this: imagine a library. If you ask &quot;where are all the books about greek gods&quot;, you don't go through every book in the library, one by one, trying to figure out of it's about a greek god.  You look up &quot;greek gods&quot; in the catalog, and see they're shelved in section 292: &quot;Classical religion (Greek and Roman religion)&quot;. If you have more specifics from there, you can narrow down which particular books you might want from there (e.g. 292.211: &quot;Greek and Roman Gods&quot;) - but the important thing is that someone has already gone to the effort of sorting and shelving the books in a methodical manner, and creating an index from (in this case) topic to books to make it easy to find. Without that, you'd be lost.</p>
<p>Similarly, Google is not searching for those keywords &quot;in 2 billion websites&quot;, website by website, when you make the query. Google has already crawled all of those websites, either by discovering their existence themselves, or because someone submitted a list of the URLs, manually, to be indexed: <a href="https://developers.google.com/search/docs/guides/submit-URLs" target="_blank"><a href="https://developers.google.com/search/docs/guides/submit-URLs" target="_blank">https://developers.google.com/search/docs/guides/submit-URLs</a></a></p>
<p>They've built a convenient index from (and at this point, this is likely oversimplifying things a bit, but the basic principles are there) keyword to the set of pages containing said keyword, similar to the library's catalog, or, as they put it &quot;the index in the back of a book&quot;:  <a href="https://www.google.com/search/howsearchworks/crawling-indexing/" target="_blank"><a href="https://www.google.com/search/howsearchworks/crawling-indexing/" target="_blank">https://www.google.com/search/howsearchworks/crawling-indexing/</a></a></p>
<p>That index can then get split up into smaller chunks and copied to multiple servers which will be responsible for responding to your queries.. The general idea is that when you make your query, the query gets sent to multiple servers which each handle part of the index data, so that the search can be handled more quickly. The best results from each are then combined and ranked, and the best overall are served to you.</p>
<p>This is a little less written about, because it's probably of less interest to most folks who might otherwise care about the process. So, I have less in the way of &quot;user friendly presentations&quot;, but can still point you to, say, research publications. This one seems to give a decent overview of a lot of the concepts and techniques involved without being utterly incomprehensible, if for some reason you want to dig: <a href="https://research.google.com/pubs/archive/37043.pdf" target="_blank"><a href="https://research.google.com/pubs/archive/37043.pdf" target="_blank">https://research.google.com/pubs/archive/37043.pdf</a></a></p>
<p>But for the library analogy, imagine your library is huge, and section 292.211 spans an entire row of bookshelves. You could have one person look through every bookshelf in the row to grab every book about that seems like it's about Zeus, or you could have 10 people each take a bookshelf and do the same. You wind up with roughly the same net result (one pile of books about Zeus, or ten piles of books which then get pushed together into one pile of books), but you can do so in potentially \~1/10th the time, using 10x the effort.</p>
<p>In short, it absolutely <em>does</em> take longer than a fraction of a second, <em>overall</em>, to make such a search when you consider the total work done. But the vast majority of the work is done once, in advance, and what little work is left to be done at query time to handle <em>your exact query</em> is split among many machines to make it as fast as possible.</p></div>		<div class="replies-controls">
			<a class="show-replies" href="javascript:void(0)">show replies...</a>
			<a class="hide-replies" href="javascript:void(0)">hide replies...</a>
		</div>
		<div class="replies-placeholder"></div>
	</div>
	<div class="answer" data-handle="ghs0prx">
		<span class="qa" title="Answer">A:</span><div class="markdown"><p>[entfernt]</p></div>		<div class="replies-placeholder"></div>
	</div>
	<div class="answer" data-handle="ghrlkqw">
		<a class="author" href="https://www.reddit.com/user/orebright" target="_blank">orebright</a>
		<span class="qa" title="Answer">A:</span><div class="markdown"><p>It could be conceptualized as reformatting the data to make it much easier to search. In the formatted state the data is not really human-readable, but the piece of data you find from this process has a reference to the source url which can easily be retrieved. This process is called &quot;indexing&quot;.</p>
<p>Here's a very simple example: I want to search a paragraph to find out which sentences contain the word &quot;lorem&quot;. Here's my paragraph (with annotated sentence numbers, you can think of them as the &quot;url&quot; of the sentence):</p>
<p>&quot;(0) Lorem ipsum dolor sit amet, consectetur adipiscing elit. (1) Vivamus nec lacus sed urna laoreet placerat. (2) Ut condimentum mattis velit, sed vestibulum nisl condimentum et. (3) Phasellus sed volutpat tellus, pharetra blandit ex. (4) Donec tincidunt nunc quis nisi lacinia interdum. (5) Mauris a felis sit amet nibh faucibus iaculis ut eget nunc. (6) Integer et nunc quis sem tristique feugiat ut in purus. (7) Etiam aliquam lacinia vehicula. (8) Cras euismod vel sapien at molestie. (9) Fusce dapibus congue lorem a porta. (10) Vivamus bibendum ipsum et elementum blandit. (11) In consequat sit amet est fringilla dignissim. (12) Suspendisse et consequat nisl, non rutrum velit. (13) Curabitur molestie consequat nisi, vitae tincidunt libero tristique id. (14) Sed ut auctor purus. (15) Vivamus eget est eget libero consectetur eleifend nec finibus ligula.&quot;</p>
<p>There are 16 sentences and 117 words in that paragraph. The least optimal way to search through this paragraph would be for the algorithm to go one word at a time. Pseudocode:</p>
<p><code>for every word in paragraph return the sentence number if word is equal to "lorem"</code></p>
<p>This algorithm would run 117 times to return this value: 0 and 9</p>
<p>To create an index, you'd actually run this same algorithm for every word in the paragraph beforehand and save it in your disk for later. You would end up with something like this:</p>
<p><strong>lorem</strong>: <em>0, 9</em> | <strong>ipsum</strong>: <em>0, 10</em> | <strong>dolor</strong>: <em>0</em> | <strong>sit</strong>: <em>0, 5, 11</em> | <strong>amet</strong>: <em>0, 5, 11</em> | <strong>consectetur</strong>: <em>0, 15</em> | <strong>adipiscing</strong>: <em>0</em> | <strong>elit</strong>: <em>0</em> | <strong>vivamus</strong>: <em>1, 10, 15</em> | <strong>nec</strong>: <em>1, 15</em> | <strong>lacus</strong>: <em>1</em> | <strong>sed</strong>: <em>1, 2, 3, 14</em> | <strong>urna</strong>: <em>1</em> | <strong>laoreet</strong>: <em>1</em> | <strong>placerat</strong>: <em>1</em> | <strong>ut</strong>: <em>2, 5, 6, 14</em> | <strong>condimentum</strong>: <em>2, 2</em> | <strong>mattis</strong>: <em>2</em> | <strong>velit</strong>: <em>2, 12</em> | <strong>vestibulum</strong>: <em>2</em> | <strong>nisl</strong>: <em>2, 12</em> | <strong>et</strong>: <em>2, 6, 10, 12</em> | <strong>phasellus</strong>: <em>3</em> | <strong>volutpat</strong>: <em>3</em> | <strong>tellus</strong>: <em>3</em> | <strong>pharetra</strong>: <em>3</em> | <strong>blandit</strong>: <em>3, 10</em> | <strong>ex</strong>: <em>3</em> | <strong>donec</strong>: <em>4</em> | <strong>tincidunt</strong>: <em>4, 13</em> | <strong>nunc</strong>: <em>4, 5, 6</em> | <strong>quis</strong>: <em>4, 6</em> | <strong>nisi</strong>: <em>4, 13</em> | <strong>lacinia</strong>: <em>4, 7</em> | <strong>interdum</strong>: <em>4</em> | <strong>mauris</strong>: <em>5</em> | <strong>a</strong>: <em>5, 9</em> | <strong>felis</strong>: <em>5</em> | <strong>nibh</strong>: <em>5</em> | <strong>faucibus</strong>: <em>5</em> | <strong>iaculis</strong>: <em>5</em> | <strong>eget</strong>: <em>5, 15, 15</em> | <strong>integer</strong>: <em>6</em> | <strong>sem</strong>: <em>6</em> | <strong>tristique</strong>: <em>6, 13</em> | <strong>feugiat</strong>: <em>6</em> | <strong>in</strong>: <em>6, 11</em> | <strong>purus</strong>: <em>6, 14</em> | <strong>etiam</strong>: <em>7</em> | <strong>aliquam</strong>: <em>7</em> | <strong>vehicula</strong>: <em>7</em> | <strong>cras</strong>: <em>8</em> | <strong>euismod</strong>: <em>8</em> | <strong>vel</strong>: <em>8</em> | <strong>sapien</strong>: <em>8</em> | <strong>at</strong>: <em>8</em> | <strong>molestie</strong>: <em>8, 13</em> | <strong>fusce</strong>: <em>9</em> | <strong>dapibus</strong>: <em>9</em> | <strong>congue</strong>: <em>9</em> | <strong>porta</strong>: <em>9</em> | <strong>bibendum</strong>: <em>10</em> | <strong>elementum</strong>: <em>10</em> | <strong>consequat</strong>: <em>11, 12, 13</em> | <strong>est</strong>: <em>11, 15</em> | <strong>fringilla</strong>: <em>11</em> | <strong>dignissim</strong>: <em>11</em> | <strong>suspendisse</strong>: <em>12</em> | <strong>non</strong>: <em>12</em> | <strong>rutrum</strong>: <em>12</em> | <strong>curabitur</strong>: <em>13</em> | <strong>vitae</strong>: <em>13</em> | <strong>libero</strong>: <em>13, 15</em> | <strong>id</strong>: <em>13</em> | <strong>auctor</strong>: <em>14</em> | <strong>eleifend</strong>: <em>15</em> | <strong>finibus</strong>: <em>15</em> | <strong>ligula</strong>: <em>15</em></p>
<p>The worst case scenario here, searching &quot;ligula&quot; would take 79 runs of the algorithm, an improvement of 32%. The best case scenario would be &quot;lorem&quot; at 99.99% faster. This has 2 improvements: Once you've found your word, you immediately know all its occurrences, and it can &quot;short circuit&quot; so if you find your word you don't need to keep looking. But that 32% floor is also not usually so high:</p>
<p>There's another angle to consider, vocabulary is finite but writing is infinite. In other words, you might have a few hundred thousand words in your index but have literal googols of combinations of those words on the internet, and of course the upper limit is infinite. If you make an index of all these websites, you only ever have to search a few hundred thousand words, which is relatively easy, and be able to retrieve the result of billions of webpages with trillions of word combinations. This is combined with other techniques like caching to make search engines quite efficient at looking through incredibly large amounts of data.</p></div>		<div class="replies-placeholder"></div>
	</div>
	<div class="answer" data-handle="ghpn3wo">
		<span class="qa" title="Answer">A:</span><div class="markdown"><p>[entfernt]</p></div>		<div class="replies-controls">
			<a class="show-replies" href="javascript:void(0)">show replies...</a>
			<a class="hide-replies" href="javascript:void(0)">hide replies...</a>
		</div>
		<div class="replies-placeholder"></div>
	</div>
</div>		</div>
		<div class="more-less">
			<a class="collapse" href="javascript:void(0)">collapse</a>
			<a class="more-answers" href="javascript:void(0)">4 more answers...</a>
			<a class="less-answers lower" href="javascript:void(0)">less answers...</a>
			&nbsp;
		</div>
	</div>
	<a class="show" href="/posts/ko97vd" onclick="return false"><span>show</span></a>
</li>
		</ul>
	</div>

	<script>
		var config = {"stream":{"initial":10,"catchup":5},"api":{"url":"api.veryinteresting.io"}};
	</script>
	<script src="/js/project.js"></script>
	<script src="/js/post.js"></script>
</body>
</html>